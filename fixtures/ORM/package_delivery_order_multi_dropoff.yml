include:
  - address_store.yml
  - address_client_1.yml
  - address_warehouse.yml

AppBundle\Entity\Task:
  task_1:
    type: 'PICKUP'
    status: 'TODO'
    doneAfter: <identity(new \DateTime('today 10:30:00'))>
    doneBefore: <identity(new \DateTime('today 11:30:00'))>
    address: "@address_store"
  task_2:
    status: 'TODO'
    doneAfter: <identity(new \DateTime('today 10:30:00'))>
    doneBefore: <identity(new \DateTime('today 14:30:00'))>
    address: "@address_client_1"
  task_3:
    status: 'TODO'
    doneAfter: <identity(new \DateTime('today 10:30:00'))>
    doneBefore: <identity(new \DateTime('today 16:30:00'))>
    address: "@address_warehouse"

AppBundle\Entity\Delivery:
  delivery_1:
    store: "@store_1"
    __factory:
      createWithTasks:
        - '@task_1'
        - '@task_2'
        - '@task_3'

AppBundle\Entity\Sylius\Order:
  order_1:
    __factory:
      '@sylius.factory.order::createForDelivery':
        - "@delivery_1"
    __calls:
      - setNumber: [ "A1" ]
      - setState: [ 'new' ]
    # The rest of initialization is done by DeliveryOrderProcessor
