include:
  - address_store.yml
  - address_warehouse.yml
  - address_client_1.yml

AppBundle\Entity\Delivery\PricingRuleSet:
  pricing_rule_set_with_supplements:
    name: 'With Manual Supplements'
    strategy: 'map'
    rules: ['@pricing_rule_base', '@pricing_rule_weight', '@manual_supplement_1', '@manual_supplement_2']
  pricing_rule_set_2:
    name: 'Pricing Rule Set 2'
    rules: ['@manual_supplement_3']

AppBundle\Entity\Delivery\PricingRule:
  pricing_rule_base:
    expression: 'distance > 0'
    price: 499
    position: 1
    ruleSet: '@pricing_rule_set_with_supplements'
  pricing_rule_weight:
    expression: 'weight > 25000'
    price: 200
    position: 2
    ruleSet: '@pricing_rule_set_with_supplements'
  manual_supplement_1:
    expression: 'false'
    price: 200
    position: 3
    ruleSet: '@pricing_rule_set_with_supplements'
  manual_supplement_2:
    expression: 'false'
    price: 300
    position: 4
    ruleSet: '@pricing_rule_set_with_supplements'
  #  manual supplement not belonging to a pricing rule for this store
  manual_supplement_3:
    expression: 'false'
    price: 300
    position: 1
    ruleSet: '@pricing_rule_set_2'

AppBundle\Entity\Sylius\ProductOptionValue:
  manual_supplement_option_value_1:
    currentLocale: 'fr'
    value: 'Express Delivery'
    code: 'EXPRESS_DELIVERY'
    option: '@product_option_fixed_price_rules'
    pricingRule: '@manual_supplement_1'
  manual_supplement_option_value_2:
    currentLocale: 'fr'
    value: 'Fragile Handling'
    code: 'FRAGILE_HANDLING'
    option: '@product_option_fixed_price_rules'
    pricingRule: '@manual_supplement_2'
  manual_supplement_option_value_3:
    currentLocale: 'fr'
    value: 'Express Delivery 3'
    code: 'EXPRESS_DELIVERY_3'
    option: '@product_option_fixed_price_rules'
    pricingRule: '@manual_supplement_3'

AppBundle\Entity\Store:
  store_1:
    name: 'Store with Manual Supplements'
    address: '@address_store'
    enabled: true
    pricingRuleSet: '@pricing_rule_set_with_supplements'
    __calls:
      - addAddress: [ "@address_warehouse" ]
      - addAddress: [ "@address_client_1" ]

AppBundle\Entity\User:
  store_owner:
    __factory:
      '@Nucleos\UserBundle\Util\UserManipulator::create':
        - 'store_1'
        - 'store_1'
        - 'store1@coopcycle.org'
        - true
        - false
    roles: [ 'ROLE_USER', 'ROLE_STORE' ]
    stores: [ '@store_1' ]

