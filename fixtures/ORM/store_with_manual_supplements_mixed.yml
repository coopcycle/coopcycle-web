include:
  - address_store.yml
  - address_warehouse.yml
  - address_client_1.yml

AppBundle\Entity\Delivery\PricingRuleSet:
  pricing_rule_set_with_mixed_supplements:
    name: 'With Mixed Supplements'
    strategy: 'map'
    rules: ['@pricing_rule_base', '@manual_supplement_fixed_1', '@manual_supplement_fixed_2', '@manual_supplement_range_1', '@manual_supplement_range_2']

AppBundle\Entity\Delivery\PricingRule:
  pricing_rule_base:
    expression: 'distance > 0'
    price: 499
    position: 1
    ruleSet: '@pricing_rule_set_with_mixed_supplements'
  # Fixed price manual supplements
  manual_supplement_fixed_1:
    expression: 'false'
    price: 200
    position: 2
    ruleSet: '@pricing_rule_set_with_mixed_supplements'
  manual_supplement_fixed_2:
    expression: 'false'
    price: 300
    position: 3
    ruleSet: '@pricing_rule_set_with_mixed_supplements'
  # Range-based manual supplements
  manual_supplement_range_1:
    expression: 'false'
    price: 'price_range(quantity, 500, 5, 0)'
    position: 4
    ruleSet: '@pricing_rule_set_with_mixed_supplements'
  manual_supplement_range_2:
    expression: 'false'
    price: 'price_range(quantity, 200, 1, 2)'
    position: 5
    ruleSet: '@pricing_rule_set_with_mixed_supplements'

AppBundle\Entity\Sylius\ProductOptionValue:
  # Fixed price option values
  manual_supplement_option_value_fixed_1:
    currentLocale: 'fr'
    value: 'Express Delivery'
    code: 'EXPRESS_DELIVERY'
    option: '@product_option_fixed_price_rules'
    pricingRule: '@manual_supplement_fixed_1'
  manual_supplement_option_value_fixed_2:
    currentLocale: 'fr'
    value: 'Fragile Handling'
    code: 'FRAGILE_HANDLING'
    option: '@product_option_fixed_price_rules'
    pricingRule: '@manual_supplement_fixed_2'
  # Range-based option values
  manual_supplement_option_value_range_1:
    currentLocale: 'fr'
    value: 'Waiting time supplement'
    code: 'WAITING_TIME_SUPPLEMENT'
    option: '@product_option_range_price_rules'
    pricingRule: '@manual_supplement_range_1'
  manual_supplement_option_value_range_2:
    currentLocale: 'fr'
    value: 'Priority handling'
    code: 'PRIORITY_HANDLING'
    option: '@product_option_range_price_rules'
    pricingRule: '@manual_supplement_range_2'

AppBundle\Entity\Store:
  store_1:
    name: 'Store with Mixed Supplements'
    address: '@address_store'
    enabled: true
    pricingRuleSet: '@pricing_rule_set_with_mixed_supplements'
    __calls:
      - addAddress: [ "@address_warehouse" ]
      - addAddress: [ "@address_client_1" ]

AppBundle\Entity\User:
  store_owner:
    __factory:
      '@Nucleos\UserBundle\Util\UserManipulator::create':
        - 'store_1'
        - 'store_1'
        - 'store1@coopcycle.org'
        - true
        - false
    roles: [ 'ROLE_USER', 'ROLE_STORE' ]
    stores: [ '@store_1' ]

