include:
  - address_store.yml
  - address_warehouse.yml
  - address_client_1.yml

AppBundle\Entity\Delivery\PricingRuleSet:
  pricing_rule_set_with_range_supplements:
    name: 'With Range Supplements'
    strategy: 'map'
    rules: ['@pricing_rule_base', '@range_supplement_waiting_time', '@range_supplement_priority_handling']

AppBundle\Entity\Delivery\PricingRule:
  pricing_rule_base:
    expression: 'distance > 0'
    price: 499
    position: 1
    ruleSet: '@pricing_rule_set_with_range_supplements'
  range_supplement_waiting_time:
    expression: 'false'
    price: 'price_range(quantity, 500, 5, 0)'
    position: 2
    ruleSet: '@pricing_rule_set_with_range_supplements'
  range_supplement_priority_handling:
    expression: 'false'
    price: 'price_range(quantity, 200, 1, 2)'
    position: 3
    ruleSet: '@pricing_rule_set_with_range_supplements'

AppBundle\Entity\Sylius\ProductOptionValue:
  range_supplement_option_value_waiting_time:
    currentLocale: 'fr'
    value: 'Waiting time supplement'
    code: 'WAITING_TIME_SUPPLEMENT'
    option: '@product_option_range_price_rules'
    pricingRule: '@range_supplement_waiting_time'
  range_supplement_option_value_priority_handling:
    currentLocale: 'fr'
    value: 'Priority handling'
    code: 'PRIORITY_HANDLING'
    option: '@product_option_range_price_rules'
    pricingRule: '@range_supplement_priority_handling'

AppBundle\Entity\Store:
  store_1:
    name: 'Store with Range Supplements'
    address: '@address_store'
    enabled: true
    pricingRuleSet: '@pricing_rule_set_with_range_supplements'
    __calls:
      - addAddress: [ "@address_warehouse" ]
      - addAddress: [ "@address_client_1" ]

AppBundle\Entity\User:
  store_owner:
    __factory:
      '@Nucleos\UserBundle\Util\UserManipulator::create':
        - 'store_1'
        - 'store_1'
        - 'store1@coopcycle.org'
        - true
        - false
    roles: [ 'ROLE_USER', 'ROLE_STORE' ]
    stores: [ '@store_1' ]
