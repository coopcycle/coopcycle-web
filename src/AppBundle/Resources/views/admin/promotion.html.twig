{% extends "@App/admin.html.twig" %}

{% block breadcrumb %}
<li><a href="{{ path('admin_promotions') }}">{{ 'promotions.breadcrumb'|trans }}</a></li>
<li><a href="{{ path('admin_promotion', { id: promotion.id }) }}">{{ promotion.name }}</a></li>

{% endblock %}

{% block content %}
<p class="text-right">
  <a href="{{ path('admin_new_promotion_coupon', { id: promotion.id }) }}" class="btn btn-success">
    <i class="fa fa-plus"></i> {% trans %}basics.add{% endtrans %}
  </a>
</p>

<table class="table task-table">
  <thead>
    <th>{% trans %}sylius.ui.code{% endtrans %}</th>
    <th>{% trans %}sylius.form.promotion_coupon.usage_limit{% endtrans %}</th>
    <th>{% trans %}sylius.form.promotion_coupon.per_customer_usage_limit{% endtrans %}</th>
    <th>{% trans %}sylius.form.promotion_coupon.expires_at{% endtrans %}</th>
    <th class="text-right">{% trans %}promotion_coupon.used.label{% endtrans %}</th>
  </thead>
  <tbody>
  {% for coupon in promotion.coupons %}
      <td width="5%">
        <a href="{{ path('admin_promotion_coupon', { id: promotion.id, code: coupon.code }) }}">
          {{ coupon.code }}
        </a>
      </td>
      <td>
        {{ coupon.usageLimit }}
      </td>
      <td>
        {{ coupon.perCustomerUsageLimit }}
      </td>
      <td>
        {% if coupon.expiresAt is not empty %}
          {{ coupon.expiresAt|localizeddate('short', 'short') }}
        {% endif %}
      </td>
      <td class="text-right">
        {{ coupon.used }}
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>

{% endblock %}
